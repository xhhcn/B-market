# B-Market Docker éƒ¨ç½²æŒ‡å—

## ğŸš€ ä¸€é”®éƒ¨ç½²è¯´æ˜

æœ¬é¡¹ç›®å·²ç»å®Œç¾æ”¯æŒDockerå•å®¹å™¨éƒ¨ç½²ï¼ŒåŒ…å«å‰ç«¯ã€åç«¯å’Œnginxåå‘ä»£ç†ï¼Œæ‰€æœ‰æœåŠ¡é€šè¿‡ **8006ç«¯å£** ç»Ÿä¸€è®¿é—®ã€‚

## âœ¨ ç‰¹æ€§

- âœ… **å•Dockerå®¹å™¨** - æ— éœ€å¤æ‚çš„å¤šå®¹å™¨é…ç½®
- âœ… **SSRæ”¯æŒ** - æœåŠ¡å™¨ç«¯æ¸²æŸ“ç¡®ä¿åŠ¨æ€åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… **åå‘ä»£ç†** - nginxè‡ªåŠ¨å¤„ç†å‰ç«¯å’ŒAPIè·¯ç”±
- âœ… **ç¯å¢ƒé€‚é…** - è‡ªåŠ¨æ£€æµ‹å¼€å‘/ç”Ÿäº§ç¯å¢ƒ
- âœ… **æ•°æ®æŒä¹…åŒ–** - æ•°æ®åº“è‡ªåŠ¨åˆå§‹åŒ–å’ŒæŒä¹…åŒ–
- âœ… **å¥åº·æ£€æŸ¥** - å†…ç½®æœåŠ¡å¥åº·ç›‘æ§

## ğŸ³ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•1ï¼šä½¿ç”¨Docker Composeï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨æœåŠ¡
docker compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker compose ps

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# åœæ­¢æœåŠ¡
docker compose down
```

### æ–¹æ³•2ï¼šç›´æ¥ä½¿ç”¨Docker

```bash
# æ„å»ºé•œåƒ
docker build -t b-market:latest .

# è¿è¡Œå®¹å™¨
docker run -d --name b-market-app -p 8006:8006 b-market:latest

# æŸ¥çœ‹æ—¥å¿—
docker logs b-market-app
```

## ğŸŒ è®¿é—®åœ°å€

éƒ¨ç½²æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **ä¸»é¡µ**: http://your-server-ip:8006/
- **ç®¡ç†åå°**: http://your-server-ip:8006/admin
- **ç™»å½•é¡µé¢**: http://your-server-ip:8006/login
- **APIæ¥å£**: http://your-server-ip:8006/api/
- **å¥åº·æ£€æŸ¥**: http://your-server-ip:8006/health

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¯é€‰ç¯å¢ƒå˜é‡

å¦‚éœ€è‡ªå®šä¹‰APIåœ°å€ï¼Œå¯ä»¥è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# åœ¨docker-compose.ymlä¸­æ·»åŠ 
environment:
  - PUBLIC_API_BASE_URL=http://your-custom-api:3001/api
```

### æ•°æ®æŒä¹…åŒ–

é»˜è®¤é…ç½®å·²åŒ…å«æ•°æ®æŒä¹…åŒ–ï¼š

```yaml
volumes:
  - ./data:/app/api/data  # æ•°æ®åº“æ–‡ä»¶æŒä¹…åŒ–
```

## ğŸ“Š æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Nginx (Port 8006)        â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Frontend   â”‚  â”‚   API Server    â”‚â”‚
â”‚  â”‚ (Astro SSR) â”‚  â”‚ (Node.js:3001)  â”‚â”‚
â”‚  â”‚   Port 4321 â”‚  â”‚                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker compose ps

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker compose logs b-market

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it b-market-app /bin/sh
```

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**: ç¡®ä¿8006ç«¯å£æœªè¢«å ç”¨
2. **æƒé™é—®é¢˜**: ç¡®ä¿Dockeræœ‰è¶³å¤Ÿæƒé™åˆ›å»ºæ–‡ä»¶
3. **æœåŠ¡å¯åŠ¨å¤±è´¥**: æŸ¥çœ‹æ—¥å¿—ç¡®å®šå…·ä½“é”™è¯¯åŸå› 

### é‡æ–°éƒ¨ç½²
```bash
# å®Œå…¨é‡æ–°éƒ¨ç½²
docker compose down
docker compose up -d --build
```

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

- **å‰ç«¯**: Astro + React (SSRæ¨¡å¼)
- **åç«¯**: Node.js + Express + SQLite
- **åå‘ä»£ç†**: Nginx
- **è¿›ç¨‹ç®¡ç†**: Supervisor
- **å®¹å™¨**: Debian-based Node.js

## ğŸ” é»˜è®¤é…ç½®

- **ç®¡ç†å‘˜å¯†ç **: è¯·é€šè¿‡ç®¡ç†ç•Œé¢è®¾ç½®
- **æ•°æ®åº“**: è‡ªåŠ¨åˆå§‹åŒ–SQLiteæ•°æ®åº“
- **æ—¥å¿—**: è‡ªåŠ¨è½®è½¬å’Œæ¸…ç†

## ğŸ“ æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Dockerå’ŒDocker Composeç‰ˆæœ¬
2. ç«¯å£å ç”¨æƒ…å†µ
3. ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
4. å®¹å™¨æ—¥å¿—è¾“å‡º

---

**é¡¹ç›®ä½œè€…**: @xhh1128  
**éƒ¨ç½²æ—¶é—´**: 2025-07-02  
**Dockerç‰ˆæœ¬è¦æ±‚**: Docker 20.10+ | Docker Compose 2.0+ 